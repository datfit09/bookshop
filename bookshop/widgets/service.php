<?php/** * Elementor Posts Widget * * @package Woostify Pro */namespace Elementor;/** * Class Finazi_Service_Widget elementor posts widget. */class Finazi_Service_Widget extends \Elementor\Widget_Base {    /**     * Name     */    public function get_name() {        return 'finazi-service';    }    /**     * Title     */    public function get_title() {        return esc_html__( 'Service', 'finazi-pro' );    }    /**     * Icon     */    public function get_icon() {        return 'eicon-post';    }    /**     * Controls     */    protected function _register_controls() {        $this->start_controls_section(            'post_content',            array(                'label' => esc_html__( 'General', 'finazi-pro' ),            )        );        // Posts per page.        $this->add_control(            'posts_per_page',            array(                'label'   => esc_html__( 'Posts Per Page', 'finazi-pro' ),                'type'    => Controls_Manager::NUMBER,                'min'     => -1,                'max'     => 100,                'step'    => 1,                'default' => 4,            )        );        // Orderby.        $this->add_control(            'order_by',            array(                'label'     => esc_html__( 'Order By', 'finazi-pro' ),                'type'      => Controls_Manager::SELECT,                'default'   => 'id',                'options'   => array(                    'id'            => esc_html__( 'ID', 'finazi-pro' ),                    'author'        => esc_html__( 'Author', 'finazi-pro' ),                    'title'         => esc_html__( 'Title', 'finazi-pro' ),                    'name'          => esc_html__( 'Name', 'finazi-pro' ),                    'date'          => esc_html__( 'Date', 'finazi-pro' ),                    'rand'          => esc_html__( 'Random', 'finazi-pro' ),                    'modified'      => esc_html__( 'Modified', 'finazi-pro' ),                    'comment_count' => esc_html__( 'Comment Count', 'finazi-pro' ),                ),            )        );        // Order.        $this->add_control(            'order',            array(                'label'     => esc_html__( 'Order', 'finazi-pro' ),                'type'      => Controls_Manager::SELECT,                'default'   => 'ASC',                'options'   => array(                    'ASC'   => esc_html__( 'ASC', 'finazi-pro' ),                    'DESC'  => esc_html__( 'DESC', 'finazi-pro' ),                ),            )        );        $this->end_controls_section();    }    /**     * Render     */    protected function render() {        $settings = $this->get_settings_for_display();        // WP_Query arguments        $args = array (            'post_type'      => array( 'service' ),            'post_status'    => array( 'publish' ),            'order'          => $settings['order'],            'order_by'       => $settings['order_by'],            'posts_per_page' => $settings['posts_per_page'],        );        // The Query        $services = new \WP_Query( $args );        // The Loop        if ( $services->have_posts() ) {            echo '<dl class="service_item">';            while ( $services->have_posts() ) {                $services->the_post();                $img = get_the_post_thumbnail_url( get_the_ID(), 'full' );                ?>                    <div class="service-box">                        <?php if ( has_post_thumbnail() ) { ?>                            <h2 class="service-title"><a href="<?php the_permalink(); ?>">                                <img src="<?php echo esc_url( $img ); ?>" alt="<?php esc_attr_e( 'Service icon', 'finazi' ); ?>">                                <a href="<?php the_permalink(); ?>"><?php echo get_the_title(); ?></a>                            </a></h2>                            <span class="excerpt-service"><?php echo get_the_excerpt(); ?></span>                            <h3 class="counter-service"></h3>                        <?php }  ?>                    </div>                <?php            }            echo '</dl>';        }            // reset post.            wp_reset_postdata();        }    }Plugin::instance()->widgets_manager->register_widget_type( new Finazi_Service_Widget() );